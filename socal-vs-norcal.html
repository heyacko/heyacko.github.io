<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SoCal vs NorCal ‚Äî Guessing Game</title>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="stylesheet" href="style.css">
<style>
  /* 
  ================================================================================
  SOCAL vs NORCAL QUIZ - PAGE-SPECIFIC STYLES
  ================================================================================
  This quiz tests your knowledge of California geography, culture, and statistics.
  It presents 15 questions comparing Southern California vs Northern California
  on various topics like weather, economy, culture, and demographics.
  
  REGIONAL DEFINITIONS:
  - SoCal = San Luis Obispo & south (including Los Angeles, San Diego, etc.)
  - NorCal = Monterey & north (including San Francisco, Sacramento, etc.)
  
  CURRENT STATUS: Most styles are in the shared stylesheet, with a few custom
  overrides for question text sizing and button layouts.
  */
  .shared-qtext { font-weight:600; margin-bottom:14px; font-size:18px; }
</style>
</head>
<body>
<div class="shared-wrap">
  <div class="shared-card">
    <h1 class="shared-h1">SoCal vs NorCal ‚Äî Guessing Game</h1>
    <p class="shared-sub">
      Pick which region wins each stat. We're using a practical split: <span class="shared-pill">SoCal = San Luis Obispo & south</span> ‚Ä¢ <span class="shared-pill">NorCal = Monterey & north</span>.
      <br><span class="shared-muted">15 questions, shuffled each run. Click to guess ‚Äî we'll tell you if you're right.</span>
    </p>

    <!-- Progress -->
    <div class="shared-progress" role="progressbar" aria-valuemin="0" aria-valuemax="15" aria-valuenow="0">
      <span id="pbar"></span>
    </div>
    <div class="shared-meta"><span id="pcounter">Question 1 of 15</span><span id="score" class="shared-muted">Score: 0</span></div>

    <!-- Question area -->
    <div id="stage" class="shared-qbox" aria-live="polite"></div>

    <!-- Controls -->
    <div class="shared-controls">
      <button id="backBtn" class="shared-btn-ghost" type="button" disabled>Back</button>
      <button id="nextBtn" class="shared-btn" type="button" disabled>Next</button>
      <button id="clearBtn" class="shared-btn-ghost" type="button">Restart</button>
      <a href="index.html" class="shared-btn-ghost">üè† Home</a>
    </div>

    <!-- Results -->
    <div id="results" class="shared-results">
      <h2>Your Results</h2>
      <p class="shared-muted" id="summary"></p>
      <div id="list" class="shared-row" style="flex-direction:column;margin-top:12px;"></div>
      <div class="shared-footer">Sources planned per item. Disagree? Tap restart and try again with a friend.</div>
    </div>
  </div>
</div>

<script>
/* 
================================================================================
SOCAL vs NORCAL QUIZ - QUESTION DATABASE
================================================================================
This quiz presents 15 questions comparing Southern vs Northern California on
various topics. The questions are designed to be surprising and educational,
challenging common assumptions about California geography and culture.

QUESTION TOPICS:
- Weather and climate patterns
- Economic and demographic data  
- Cultural and lifestyle differences
- Geographic and environmental factors

SCORING:
- Each correct answer adds 1 point to your score
- Final score shows how many out of 15 you got right
- Detailed results show your answers vs correct answers

NOTE: Sources are planned for each question but not yet implemented.
*/
const BANK = [
  { q: "Which region has more wildfires per year (incidents, not acreage)?", answer: "SoCal", source: "" },
  { q: "Which region has more farmland acreage (with Kern & SLO counted as SoCal)?", answer: "SoCal", source: "" },
  { q: "Which region has higher electricity bills per household on average?", answer: "SoCal", source: "" },
  { q: "Which region gets more annual sunshine hours in key population centers?", answer: "NorCal", source: "" },
  { q: "Which region has more breweries per capita?", answer: "SoCal", source: "" },
  { q: "Which region has more installed renewable energy capacity (solar/wind/storage)?", answer: "SoCal", source: "" },
  { q: "Which region has the higher violent crime rate on average?", answer: "NorCal", source: "" },
  { q: "Which region uses more water per capita?", answer: "NorCal", source: "" },
  { q: "Which region has more electric vehicles registered in total?", answer: "SoCal", source: "" },
  { q: "Which region has higher voter turnout in recent statewide elections?", answer: "SoCal", source: "" },
  { q: "Which region has more active Airbnb listings?", answer: "NorCal", source: "" },
  { q: "Which region has a higher share of renters vs homeowners?", answer: "SoCal", source: "" },
  { q: "Which region recorded more earthquakes of magnitude ‚â• 4 in the past decade?", answer: "NorCal", source: "" },
  { q: "Which region has a higher adult obesity rate overall?", answer: "SoCal", source: "" },
  { q: "Which region has more registered Teslas in total?", answer: "SoCal", source: "" },
];

// ======================= UTILS =======================
function rngInt(n){
  if (window.crypto?.getRandomValues){
    const a = new Uint32Array(1); crypto.getRandomValues(a);
    return a[0] % n;
  }
  return Math.floor(Math.random()*n);
}
function shuffle(arr){
  for (let i=arr.length-1;i>0;i--){
    const j = rngInt(i+1);
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// ======================= STATE =======================
let QUESTIONS = shuffle([...BANK]);      // 15 items shuffled
let idx = 0;
let score = 0;
const guesses = new Array(QUESTIONS.length).fill(null);  // 'SoCal'|'NorCal'|null
const correctness = new Array(QUESTIONS.length).fill(null); // true|false|null

// ======================= DOM =======================
const stage = document.getElementById('stage');
const pbar = document.getElementById('pbar');
const pcounter = document.getElementById('pcounter');
const scoreEl = document.getElementById('score');
const backBtn = document.getElementById('backBtn');
const nextBtn = document.getElementById('nextBtn');
const clearBtn = document.getElementById('clearBtn');
const resultsEl = document.getElementById('results');
const summaryEl = document.getElementById('summary');
const listEl = document.getElementById('list');

// ======================= RENDER =======================
function render(){
  const total = QUESTIONS.length;
  const human = idx + 1;
  pbar.style.width = ((human-1)/total*100) + '%';
  document.querySelector('.shared-progress').setAttribute('aria-valuenow', human-1);
  pcounter.textContent = `Question ${human} of ${total}`;
  scoreEl.textContent = `Score: ${score}`;

  const item = QUESTIONS[idx];

  stage.innerHTML = '';
  const qtext = document.createElement('div');
  qtext.className = 'shared-qtext';
  qtext.textContent = `${human}. ${item.q}`;
  stage.appendChild(qtext);

  const btns = document.createElement('div');
  btns.className = 'bigBtns';
  const btnSo = document.createElement('button');
  btnSo.className = 'choiceBtn';
  btnSo.textContent = 'Southern California';
  const btnNo = document.createElement('button');
  btnNo.className = 'choiceBtn';
  btnNo.textContent = 'Northern California';
  btns.appendChild(btnSo); btns.appendChild(btnNo);
  stage.appendChild(btns);

  const fb = document.createElement('div');
  fb.className = 'feedback';
  fb.style.display = 'none';
  stage.appendChild(fb);

  // Restore previous selection state if any
  if (guesses[idx]){
    btnSo.disabled = true; btnNo.disabled = true;
    nextBtn.disabled = false;
    const correct = correctness[idx];
    fb.style.display = 'block';
    fb.className = 'feedback ' + (correct ? 'good' : 'bad');
    fb.innerHTML = correct ? `‚úÖ Correct: <strong>${item.answer}</strong>` :
                             `‚ùå Nope ‚Äî Correct is <strong>${item.answer}</strong>`;
    if (item.source){
      const s = document.createElement('div');
      s.className = 'muted'; s.style.marginTop = '6px';
      s.innerHTML = `Source: <a href="${item.source}" target="_blank" rel="noopener">link</a>`;
      fb.appendChild(s);
    }
  } else {
    nextBtn.disabled = true;
  }

  function lockIn(choice){
    if (guesses[idx]) return; // already answered
    guesses[idx] = choice;
    const correct = (choice === item.answer);
    correctness[idx] = correct;
    if (correct) score++;

    btnSo.disabled = true; btnNo.disabled = true;
    nextBtn.disabled = false;
    fb.style.display = 'block';
    fb.className = 'feedback ' + (correct ? 'good' : 'bad');
    fb.innerHTML = correct ? `‚úÖ Correct: <strong>${item.answer}</strong>` :
                             `‚ùå Nope ‚Äî Correct is <strong>${item.answer}</strong>`;
    if (item.source){
      const s = document.createElement('div');
      s.className = 'muted'; s.style.marginTop = '6px';
      s.innerHTML = `Source: <a href="${item.source}" target="_blank" rel="noopener">link</a>`;
      fb.appendChild(s);
    }
  }

  btnSo.addEventListener('click', ()=> lockIn('SoCal'));
  btnNo.addEventListener('click', ()=> lockIn('NorCal'));

  backBtn.disabled = idx === 0;
  nextBtn.textContent = (idx === total-1) ? 'See Results' : 'Next';

  resultsEl.style.display = 'none';
}
render();

// ======================= NAV =======================
backBtn.addEventListener('click', ()=>{
  if (idx>0){ idx--; render(); }
});
nextBtn.addEventListener('click', ()=>{
  if (guesses[idx] == null) return;
  if (idx < QUESTIONS.length-1){
    idx++; render();
  } else {
    showResults();
  }
});
clearBtn.addEventListener('click', ()=>{
  QUESTIONS = shuffle([...BANK]);
  idx = 0; score = 0;
  guesses.fill(null); correctness.fill(null);
  render();
});

// ======================= RESULTS =======================
function showResults(){
  pbar.style.width = '100%';
  document.querySelector('.shared-progress').setAttribute('aria-valuenow', QUESTIONS.length);
  const total = QUESTIONS.length;
  summaryEl.textContent = `You got ${score} out of ${total} correct.`;

  listEl.innerHTML = '';
  QUESTIONS.forEach((item, i)=>{
    const row = document.createElement('div');
    row.style.padding = '10px 12px';
    row.style.border = '1px solid #232a36';
    row.style.borderRadius = '10px';
    row.style.background = '#0f131a';

    const head = document.createElement('div');
    head.style.fontWeight = '600';
    head.innerHTML = `${i+1}. ${item.q}`;

    const det = document.createElement('div');
    det.className = 'shared-muted';
    const got = guesses[i] ?? 'No guess';
    const ok = correctness[i] === true ? '‚úÖ' : (correctness[i] === false ? '‚ùå' : '‚Äî');
    det.innerHTML = `${ok} You: <strong>${got}</strong> ¬∑ Correct: <strong>${item.answer}</strong>` + (item.source ? ` ¬∑ <a href="${item.source}" target="_blank" rel="noopener">Source</a>` : '');

    row.appendChild(head); row.appendChild(det);
    listEl.appendChild(row);
  });

  resultsEl.style.display = 'block';
  resultsEl.scrollIntoView({behavior:'smooth', block:'start'});
}

// ======================= HOTKEYS =======================
document.addEventListener('keydown', (e)=>{
  if (e.key==='ArrowLeft' && !backBtn.disabled) backBtn.click();
  if (e.key==='ArrowRight' && !nextBtn.disabled) nextBtn.click();
});

// ======================= PARALLAX GRID EFFECT =======================
window.addEventListener('scroll', function() {
  const scrolled = window.pageYOffset;
  document.documentElement.style.setProperty('--scroll-y', scrolled + 'px');
});
</script>
</body>
</html>
