<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The Tuesday That Wouldn’t End — CYOA Worldview Quiz</title>
<style>
  :root{--bg:#0f1115;--card:#171a21;--ink:#e8ebf2;--muted:#a4adbd;--accent:#6aa8ff;--ok:#66d9a8;--warn:#ffcc66;--bad:#ff7a7a;--line:#232a36}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
  .wrap{max-width:820px;margin:36px auto;padding:0 16px 80px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:24px;box-shadow:0 12px 30px rgba(0,0,0,.25)}
  h1{margin:0 0 8px;font-size:28px}
  .sub{color:var(--muted);margin:0 0 14px}
  .progress{height:10px;border-radius:8px;background:#263142;overflow:hidden;margin:10px 0 6px}
  .progress>span{display:block;height:100%;background:var(--accent);width:0%;transition:width .25s ease}
  .meta{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:13px}
  .qbox{margin-top:16px;padding:18px;border-radius:12px;background:#11141a;border:1px solid #232a36}
  .qtext{font-weight:700;margin-bottom:12px}
  .opts{display:grid;gap:10px}
  label.opt{display:flex;gap:10px;align-items:flex-start;background:#0f131a;border:1px solid #263142;padding:12px;border-radius:10px;cursor:pointer}
  input[type=radio]{transform:translateY(2px)}
  .controls{display:flex;gap:10px;margin-top:16px}
  button{appearance:none;border:0;background:var(--accent);color:#061320;padding:12px 16px;border-radius:12px;font-weight:700;cursor:pointer}
  button:disabled{opacity:.55;cursor:not-allowed}
  .ghost{background:transparent;color:var(--ink);border:1px solid #2a3446}
  .muted{color:var(--muted);font-size:13px}
  .results{display:none;margin-top:18px}
  .grid{display:grid;gap:10px}
  .axisRow{display:grid;grid-template-columns:180px 1fr 70px;align-items:center;gap:10px}
  .bar{height:10px;border-radius:8px;background:#263142;overflow:hidden}
  .bar>span{display:block;height:100%;background:var(--ok)}
  .pill{display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px;background:#0f141c;border:1px solid #2a3446;color:var(--muted)}
  .footer{color:var(--muted);margin-top:18px;font-size:13px}
  .tag{display:inline-block;padding:4px 8px;border-radius:8px;border:1px solid #2a3446;background:#0f141c;color:var(--muted);font-size:12px}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>The Tuesday That Wouldn’t End</h1>
    <p class="sub">A short, slightly absurd slice‑of‑life adventure that quietly measures two axes: 
      <span class="pill">Rationalism ↔ Romanticism</span>
      <span class="pill">Optimism ↔ Pessimism</span>
    </p>

    <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="10" aria-valuenow="0">
      <span id="pbar"></span>
    </div>
    <div class="meta"><span id="pcounter">Question 1 of 10</span><span id="flavor" class="muted"></span></div>

    <div id="stage" class="qbox" aria-live="polite"></div>

    <div class="controls">
      <button id="backBtn" class="ghost" type="button" disabled>Back</button>
      <button id="nextBtn" type="button" disabled>Next</button>
      <button id="restartBtn" class="ghost" type="button">Restart</button>
    </div>

    <div id="results" class="results">
      <h2>Your Archetype</h2>
      <p><span id="archetype" class="tag"></span></p>
      <p id="archDesc" class="muted"></p>

      <h3 style="margin-top:18px;">Axis Scores</h3>
      <div id="axisTable" class="grid" style="margin-top:8px;"></div>

      <div class="footer">This is directional, not destiny. Share with friends and argue nicely.</div>
    </div>
  </div>
</div>

<script>
/* ===== Random garnish to keep each run a little different ===== */
const FLAVORS = [
  "Your alarm clock whispers statistics at you.",
  "The office ficus seems to be judging.",
  "A pigeon nods like it knows your secrets.",
  "Somewhere, a microwave beeps forever.",
  "You smell rain and also, unhelpfully, toast.",
  "The coffee machine says: ‘brbrbr optimism engaged’.",
  "A meeting invite reproduces by mitosis.",
  "Your shoelace unionizes mid‑stride.",
  "A cloud looks exactly like your to‑do list.",
  "A calendar notification winks ominously."
];

function pickFlavor(){
  return FLAVORS[Math.floor(Math.random()*FLAVORS.length)];
}

/* ===== Questions (5 for Rationalism vs Romanticism; 5 for Optimism vs Pessimism) ===== */
// Each choice maps to axis deltas. We'll keep scoring simple and transparent.
// For Q1–Q5 (Rationalism axis): A = +2 Rational, B = -1 Romantic, C = -2 Romantic, D = -2 Romantic (often fatalist/anti‑method)
// For Q6–Q10 (Optimism axis): A = +1 Optimism (calm, fix‑it), B = +2 Optimism, C = +2 Optimism, D = -2 Pessimism

const QUESTIONS = [
  // 1–5 Rationalism vs Romanticism
  { id:1, text:"The Coffee Dilemma — your mug has a crack.", opts:[
      {k:"A", t:"Glue it precisely and test it.", delta:{rat:+2}},
      {k:"B", t:"Try a TikTok ceramic hack.", delta:{rat:-1}},
      {k:"C", t:"Pour anyway. Character builds flavor.", delta:{rat:-2}},
      {k:"D", t:"Toss it; destiny hates mugs.", delta:{rat:-2}}
  ]},
  { id:2, text:"Commute — your bike chain snaps.", opts:[
      {k:"A", t:"Diagnose and fix with a multitool.", delta:{rat:+2}},
      {k:"B", t:"Wait for a helpful stranger.", delta:{rat:-1}},
      {k:"C", t:"Walk and hum. It’s the journey.", delta:{rat:-2}},
      {k:"D", t:"Sit and curse entropy.", delta:{rat:-2}}
  ]},
  { id:3, text:"Meeting — ‘let’s ideate outside the box’.", opts:[
      {k:"A", t:"Draw a workflow diagram.", delta:{rat:+2}},
      {k:"B", t:"Spin a soulful box metaphor.", delta:{rat:-1}},
      {k:"C", t:"Joke: ‘What if the box is sentient?’", delta:{rat:-2}},
      {k:"D", t:"Stare. The box has already won.", delta:{rat:-2}}
  ]},
  { id:4, text:"Lunch line — they ran out of your order.", opts:[
      {k:"A", t:"Assemble an optimal substitute.", delta:{rat:+2}},
      {k:"B", t:"Ask the chef to improvise.", delta:{rat:-1}},
      {k:"C", t:"Pick the most chaotic special.", delta:{rat:-2}},
      {k:"D", t:"Leave. Nothing tastes right now.", delta:{rat:-2}}
  ]},
  { id:5, text:"Forecast — rain starts mid‑afternoon.", opts:[
      {k:"A", t:"Check Doppler and plan.", delta:{rat:+2}},
      {k:"B", t:"Smell the air; trust instincts.", delta:{rat:-1}},
      {k:"C", t:"Walk into it on purpose.", delta:{rat:-2}},
      {k:"D", t:"Mutter that nature is trolling.", delta:{rat:-2}}
  ]},

  // 6–10 Optimism vs Pessimism
  { id:6, text:"Elevator — it shudders between floors.", opts:[
      {k:"A", t:"Press emergency, assess calmly.", delta:{opt:+1}},
      {k:"B", t:"Reassure everyone we’ll be fine.", delta:{opt:+2}},
      {k:"C", t:"Start a sing‑along.", delta:{opt:+2}},
      {k:"D", t:"Whisper: ‘This is how it ends.’", delta:{opt:-2}}
  ]},
  { id:7, text:"Neighborhood kid — kite stuck on a power line.", opts:[
      {k:"A", t:"Calculate angles; fetch a pole.", delta:{opt:+1}},
      {k:"B", t:"Coach a wind‑belief speech.", delta:{opt:+2}},
      {k:"C", t:"Buy a new kite together.", delta:{opt:+2}},
      {k:"D", t:"Explain gravity always wins.", delta:{opt:-2}}
  ]},
  { id:8, text:"Friend text — ‘I quit to travel.’", opts:[
      {k:"A", t:"Ask about their runway.", delta:{opt:+1}},
      {k:"B", t:"Say: ‘Go find yourself!’", delta:{opt:+2}},
      {k:"C", t:"Book a flight too.", delta:{opt:+2}},
      {k:"D", t:"‘World’s burning. Good luck.’", delta:{opt:-2}}
  ]},
  { id:9, text:"Street musician — off‑key, earnest.", opts:[
      {k:"A", t:"Note the tuning; tip anyway.", delta:{opt:+1}},
      {k:"B", t:"Toss change — heart counts.", delta:{opt:+2}},
      {k:"C", t:"Dance like the timeline isn’t real.", delta:{opt:+2}},
      {k:"D", t:"Mope: civilization in decline.", delta:{opt:-2}}
  ]},
  { id:10, text:"Sunset — the sky is suspiciously green.", opts:[
      {k:"A", t:"Ponder atmospheric scattering.", delta:{opt:+1}},
      {k:"B", t:"Marvel at the magic of it.", delta:{opt:+2}},
      {k:"C", t:"Snap a photo; life is weird.", delta:{opt:+2}},
      {k:"D", t:"Assume pollution finally did it.", delta:{opt:-2}}
  ]}
];

/* ===== Shuffle questions lightly for variety (but keep axis blocks intact) ===== */
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]] } return arr }
function buildRun(){
  const first = shuffle(QUESTIONS.slice(0,5));
  const second = shuffle(QUESTIONS.slice(5,10));
  return first.concat(second); // preserves axis grouping but randomizes within
}

let QUIZ = buildRun();
let idx = 0;
let answers = new Array(QUIZ.length).fill(null);
let score = { rat:0, opt:0 };

// Elements
const stage = document.getElementById('stage');
const pbar = document.getElementById('pbar');
const pcounter = document.getElementById('pcounter');
const flavor = document.getElementById('flavor');
const backBtn = document.getElementById('backBtn');
const nextBtn = document.getElementById('nextBtn');
const restartBtn = document.getElementById('restartBtn');
const resultsEl = document.getElementById('results');
const archetype = document.getElementById('archetype');
const archDesc = document.getElementById('archDesc');
const axisTable = document.getElementById('axisTable');

function render(){
  flavor.textContent = pickFlavor();
  const total = QUIZ.length; const human = idx+1;
  pbar.style.width = ((human-1)/total*100)+"%";
  document.querySelector('.progress').setAttribute('aria-valuenow', human-1);
  pcounter.textContent = `Question ${human} of ${total}`;

  const q = QUIZ[idx];
  stage.innerHTML = '';
  const qtext = document.createElement('div'); qtext.className='qtext'; qtext.textContent = `${human}. ${q.text}`; stage.appendChild(qtext);
  const opts = document.createElement('div'); opts.className='opts';
  q.opts.forEach((opt, j)=>{
    const id = `q${idx}_${opt.k}`;
    const lab = document.createElement('label'); lab.className='opt'; lab.setAttribute('for', id);
    lab.innerHTML = `<input type="radio" name="q${idx}" id="${id}" value="${opt.k}"> <span>${opt.k}) ${opt.t}</span>`;
    opts.appendChild(lab);
  });
  stage.appendChild(opts);

  // restore saved
  if (answers[idx]){
    const input = stage.querySelector(`input[value="${answers[idx]}"]`);
    if (input) input.checked = true;
  }

  backBtn.disabled = idx===0;
  nextBtn.textContent = (idx===total-1)?'See Results':'Next';
  nextBtn.disabled = !answers[idx];

  stage.addEventListener('change', (e)=>{
    if (e.target && e.target.type==='radio'){
      answers[idx] = e.target.value;
      nextBtn.disabled = false;
    }
  });

  resultsEl.style.display='none';
}

function computeScores(){
  score = { rat:0, opt:0 };
  for (let i=0;i<QUIZ.length;i++){
    const a = answers[i]; if(!a) continue;
    const q = QUIZ[i];
    const opt = q.opts.find(o=>o.k===a);
    if (opt?.delta?.rat) score.rat += opt.delta.rat;
    if (opt?.delta?.opt) score.opt += opt.delta.opt;
  }
  return score;
}

function pctFromScore(s, max){ // map −10..+10 => 0..100
  const clamped = Math.max(-max, Math.min(max, s));
  return 50 + (clamped / max) * 50;
}

function showResults(){
  computeScores();
  pbar.style.width = '100%';
  document.querySelector('.progress').setAttribute('aria-valuenow', QUIZ.length);

  // Determine archetype
  const r = score.rat; const o = score.opt;
  let name, desc;
  if (r>=0 && o>=0){
    name = 'Engineer of Wonder (Rational + Optimist)';
    desc = 'Problems are puzzles, not tragedies. You trust methods and momentum. You will graph the sunset and then enjoy it.';
  } else if (r>=0 && o<0){
    name = 'Tragic Analyst (Rational + Pessimist)';
    desc = 'You measure everything and assume the universe forgot the warranty. Still, your diagnostics keep the ship afloat.';
  } else if (r<0 && o>=0){
    name = 'Dreaming Humanist (Romantic + Optimist)';
    desc = 'Vibes, stories, and small kindnesses fuel you. Chaos is raw material; hope is a craft you practice daily.';
  } else {
    name = 'Melancholic Poet (Romantic + Pessimist)';
    desc = 'You feel beauty most at the fault lines. You carry rainy-day metaphors in a pocket notebook and you’re not wrong.';
  }

  archetype.textContent = name;
  archDesc.textContent = desc;

  // Axis bars
  axisTable.innerHTML='';
  const rows = [
    {label:'Rationalism ↔ Romanticism', val: score.rat, max: 10},
    {label:'Optimism ↔ Pessimism', val: score.opt, max: 10}
  ];
  rows.forEach(row=>{
    const wrap = document.createElement('div'); wrap.className='axisRow';
    const l = document.createElement('div'); l.innerHTML = `<strong>${row.label}</strong>`;
    const bar = document.createElement('div'); bar.className='bar';
    const span = document.createElement('span'); span.style.width = pctFromScore(row.val,row.max)+'%';
    span.style.background = row.val>=0 ? 'var(--ok)' : 'var(--bad)';
    bar.appendChild(span);
    const v = document.createElement('div'); v.className='muted'; v.textContent = (row.val>=0?'+':'')+row.val;
    wrap.appendChild(l); wrap.appendChild(bar); wrap.appendChild(v);
    axisTable.appendChild(wrap);
  });

  resultsEl.style.display='block';
  resultsEl.scrollIntoView({behavior:'smooth', block:'start'});
}

// Events
function next(){
  if (!answers[idx]) return;
  if (idx < QUIZ.length-1){ idx++; render(); }
  else { showResults(); }
}
function back(){ if (idx>0){ idx--; render(); } }
function restart(){ QUIZ = buildRun(); answers = new Array(QUIZ.length).fill(null); idx=0; score={rat:0,opt:0}; render(); }

backBtn.addEventListener('click', back);
nextBtn.addEventListener('click', next);
restartBtn.addEventListener('click', restart);

// Keyboard navigation
document.addEventListener('keydown',(e)=>{
  if (e.key==='ArrowLeft' && !backBtn.disabled) back();
  if (e.key==='ArrowRight' && !nextBtn.disabled) next();
});

// Init
render();
</script>
</body>
</html>
